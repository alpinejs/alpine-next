<html>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <script src="http://alpine-next.test/dist/alpine.js" defer></script>

    <table class="table m-auto mt-8 text-sm">
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['foo'] }">
                    <button x-on:click="items = ['foo', 'bar']">click me</button>

                    <template x-for="item in items">
                        <span x-text="item"></span>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['foo'] }">
                    <button x-on:click="items = []">click me</button>

                    <template x-for="item in items">
                        <span x-text="item"></span>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['foo', 'bar', 'world'] }">
                    <button x-on:click="items = []">click me</button>

                    <template x-for="item in items">
                        <span x-text="item"></span>
                    </template>
                </div>
            </td>
            <td class="border px-4 py-2 text-gray-700"></td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['first'], foo: 'bar' }">
                    <button x-on:click="foo = 'baz'">click me</button>

                    <template x-for="item in items">
                        <span>
                            <h1 x-text="item"></h1>
                            <h2 x-text="foo"></h2>
                        </span>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['first'] }">
                    <template x-for="item in items">
                        <div x-data="{foo: 'bar'}" class="child">
                            <span x-text="foo"></span>
                            <button x-on:click="foo = 'bob'">click me</button>
                        </div>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['first'] }">
                    <template x-for="item in items">
                        <ul>
                            <div x-data="{foo: 'bar'}" class="child">
                                <span x-text="foo"></span>
                                <button x-on:click="foo = 'bob'">click me</button>
                            </div>
                        </ul>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['foo', 'bar'] }">
                    <button x-on:click="items = ['bar', 'foo', 'baz']" id="reorder">click me</button>
                    <button x-on:click="$el.parentElement.querySelectorAll('span').forEach((el, index) => el.og_loop_index = index)" id="assign">click me</button>

                    <template x-for="item in items" :key="item">
                        <span x-text="item"></span>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['foo', 'bar'] }">
                    <button x-on:click="items = ['bar', 'foo', 'baz']" id="reorder">click me</button>
                    <button x-on:click="$el.parentElement.querySelectorAll('span').forEach((el, index) => el.og_loop_index = index)" id="assign">click me</button>

                    <template x-for="(item, index) in items" :key="index">
                        <span x-text="item"></span>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['foo'] }">
                    <template x-for="(item, index) in items">
                        <div>
                            <h1 x-text="items.indexOf(item)"></h1>
                            <h2 x-text="index"></h2>
                        </div>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['foo'] }">
                    <template x-for="(item, index, things) in items">
                        <div>
                            <h1 x-text="items"></h1>
                            <h2 x-text="things"></h2>
                        </div>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: ['foo'], output: '' }">
                    <button x-on:click="items = ['bar']">click me</button>

                    <template x-for="(item, index) in items">
                        <span x-text="item" x-on:click="output = item"></span>
                    </template>

                    <h1 x-text="output"></h1>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ foos: [ {bars: ['bob', 'lob']} ] }">
                    <button x-on:click="foos = [ {bars: ['bob', 'lob']}, {bars: ['law']} ]">click me</button>
                    <template x-for="foo in foos">
                        <h1>
                            <template x-for="bar in foo.bars">
                                <h2 x-text="bar"></h2>
                            </template>
                        </h1>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: [{name: 'one', key: '1'}, {name: 'two', key: '2'}] }">
                    <button x-on:click="items = [{name: 'zero', key: '0'}, {name: 'one', key: '1'}, {name: 'two', key: '2'}]">click me</button>

                    <template x-for="item in items" :key="item.key">
                        <span x-text="item.name"></span>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ foos: [ {name: 'foo', bars: ['bob', 'lob']}, {name: 'baz', bars: ['bab', 'lab']} ] }">
                    <template x-for="foo in foos">
                        <h1>
                            <template x-for="bar in foo.bars">
                                <h2 x-text="foo.name+': '+bar"></h2>
                            </template>
                        </h1>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ foos: [1], bars: [1, 2] }">
                    <template x-for="foo in foos">
                        <h1 x-text="foo"></h1>
                    </template>
                    <template x-for="bar in bars">
                        <h2 x-text="bar"></h2>
                    </template>
                    <button @click="foos = [1, 2];bars = [1, 2, 3]">Change</button>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data>
                    <template x-for="i in 10">
                        <span x-text="i"></span>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ count: 10 }">
                    <template x-for="i in count">
                        <span x-text="i"></span>
                    </template>
                </div>
            </td>
        </tr>
        <tr>
            <td class="border px-4 py-2">
                <div x-data="{ items: [] }">
                    <template x-for="i in items">
                        <span x-text="i"></span>
                    </template>
                    <button @click="items.push(2)" id="first">click me</button>
                    <button @click="items.push(3)" id="second">click me</button>
                </div>
            </td>
        </tr>
    </table>
</html>
